<script>
let iq = 0;
let current = 0;

const questions = [
  { q: "What is 2 + 2 ?", a: ["3", "4", "5"], correct: "4" },
  { q: "Which one is a fruit?", a: ["Carrot", "Apple", "Potato"], correct: "Apple" },
  { q: "What color is the sky on a clear day?", a: ["Blue", "Green", "Red"], correct: "Blue" },
  { q: "How many days in a week?", a: ["5", "7", "10"], correct: "7" },
  { q: "Which planet is closest to the Sun?", a: ["Mars", "Venus", "Mercury"], correct: "Mercury" },
  { q: "Who has the most powerful bite force?", a: ["A Bird", "You", "Your pet the crocodile"], correct: "Your pet the crocodile" },
  { 
    q: "What's Equator's Capital? (Hint: starts with Q)",
    a: ["Quito", "Milan", "Idk"],
    correct: "Idk",
    special: true
  }
];

function loadQuestion() {
  document.getElementById('message').textContent = "";

  if (current >= questions.length) {
    document.getElementById('quiz').innerHTML = `
      <h2>Test finished! Your IQ is ${iq}</h2>
      <button onclick="restartGame()">🔄 Replay</button>
    `;
    return;
  }
  
  const q = questions[current];
  let html = `<div class="question">${q.q}</div><div class="answers">`;

  q.a.forEach(ans => {
    html += `<button>${ans}</button>`;
  });

  html += `</div>`;
  document.getElementById('quiz').innerHTML = html;

  const buttons = document.querySelectorAll("#quiz button");

  if (q.special) {
    const quitobtn = [...buttons].find(b => b.textContent === "Quito");
    const idkbtn = [...buttons].find(b => b.textContent === "Idk");
    let moves = 0;

    // Quito qui fuit la souris
   quitobtn.addEventListener("mouseenter", () => {
  if (moves < 8) {
    const maxX = window.innerWidth - quitobtn.offsetWidth;
    const maxY = window.innerHeight - quitobtn.offsetHeight;

    const newX = Math.random() * maxX; // entre 0 et maxX
    const newY = Math.random() * maxY; // entre 0 et maxY

    quitobtn.style.position = "absolute"; // important pour pouvoir bouger librement
    quitobtn.style.left = `${newX}px`;
    quitobtn.style.top = `${newY}px`;

    moves++;
  }
});

    // Clique sur Quito → reset IQ
    quitobtn.onclick = () => {
      iq = 0;
      document.getElementById('iq').textContent = `IQ: ${iq}`;
      document.getElementById('message').textContent =
        "Seriously ? Milan is Equator's capital ? Bro, it's in Italy ! You deserved it ! 🍼 Baby brain";
      current++;
      setTimeout(loadQuestion, 2500);
    };

    // Clique sur Idk → -120 IQ
    idkbtn.onclick = () => {
      iq -= 120;
      document.getElementById('iq').textContent = `IQ: ${iq}`;
      document.getElementById('message').textContent =
        "Don't you dare cheating ?";
      current++;
      setTimeout(loadQuestion, 2500);
    };

    // Les autres réponses (ex: Milan)
    buttons.forEach(btn => {
      if (btn !== quitobtn && btn !== idkbtn) {
        btn.onclick = () => checkAnswer(btn.textContent);
      }
    });

  } else {
    buttons.forEach(btn => {
      btn.onclick = () => checkAnswer(btn.textContent);
    });
  }
}

function checkAnswer(chosen) {
  const correct = questions[current].correct;
  if (chosen === correct) {
    if (current < 3) iq += 30; 
    else iq += 10; 
    document.getElementById('iq').textContent = `IQ: ${iq}`;
    alert("✅ Correct!");
  } else {
    alert("❌ Wrong!");
  }
  current++;
  loadQuestion();
}

function restartGame() {
  iq = 0;
  current = 0;
  document.getElementById('iq').textContent = `IQ: ${iq}`;
  loadQuestion();
}

loadQuestion();
</script>

</body>
</html>
